/* ===================================
   SMOOTH TRANSITION ANIMATION SYSTEM
   ===================================
   
   This CSS file provides optimized animations for the dual-layer loading system
   with hardware acceleration, accessibility support, and performance optimization.
*/

/* ================================
   CSS CUSTOM PROPERTIES (CSS VARS)
   ================================ */

:root {
  /* Animation Timing Variables */
  --transition-fast: 150ms;
  --transition-normal: 250ms;
  --transition-slow: 300ms;
  --transition-slower: 400ms;
  
  /* Easing Functions */
  --ease-out: cubic-bezier(0.16, 1, 0.3, 1);
  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-in: cubic-bezier(0.4, 0, 1, 1);
  --ease-out-back: cubic-bezier(0.34, 1.56, 0.64, 1);
  
  /* Staggered Animation Delays */
  --delay-1: 0ms;
  --delay-2: 50ms;
  --delay-3: 100ms;
  --delay-4: 150ms;
  --delay-5: 200ms;
  --delay-6: 250ms;
  --delay-7: 300ms;
  --delay-8: 350ms;
  
  /* Performance Optimizations */
  --transform-gpu: translateZ(0);
  --backface-visibility: hidden;
  
  /* Z-index Hierarchy */
  --z-skeleton: 1;
  --z-content: 2;
  --z-modal: 10000;
  --z-transition-overlay: 9999;
}

/* ================================
   REDUCED MOTION SUPPORT
   ================================ */

@media (prefers-reduced-motion: reduce) {
  :root {
    --transition-fast: 0ms;
    --transition-normal: 0ms;
    --transition-slow: 0ms;
    --transition-slower: 0ms;
  }
  
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ================================
   HARDWARE ACCELERATION UTILITIES
   ================================ */

.gpu-accelerated {
  transform: var(--transform-gpu);
  backface-visibility: var(--backface-visibility);
  perspective: 1000px;
}

/* ================================
   BASE TRANSITION CLASSES
   ================================ */

.smooth-fade-in {
  opacity: 0;
  transform: translateY(10px);
  transition: 
    opacity var(--transition-normal) var(--ease-out),
    transform var(--transition-normal) var(--ease-out);
  will-change: opacity, transform;
}

.smooth-fade-in.active {
  opacity: 1;
  transform: translateY(0);
}

.smooth-fade-out {
  opacity: 1;
  transform: translateY(0);
  transition: 
    opacity var(--transition-normal) var(--ease-out),
    transform var(--transition-normal) var(--ease-out);
  will-change: opacity, transform;
}

.smooth-fade-out.inactive {
  opacity: 0;
  transform: translateY(-10px);
}

.smooth-scale-in {
  opacity: 0;
  transform: scale(0.95);
  transition: 
    opacity var(--transition-fast) var(--ease-out),
    transform var(--transition-fast) var(--ease-out);
  will-change: opacity, transform;
}

.smooth-scale-in.active {
  opacity: 1;
  transform: scale(1);
}

.smooth-scale-out {
  opacity: 1;
  transform: scale(1);
  transition: 
    opacity var(--transition-fast) var(--ease-out),
    transform var(--transition-fast) var(--ease-out);
  will-change: opacity, transform;
}

.smooth-scale-out.inactive {
  opacity: 0;
  transform: scale(1.05);
}

/* ================================
   SKELETON TRANSITION CLASSES
   ================================ */

.skeleton-fade-out {
  opacity: 1;
  transition: opacity var(--transition-slow) var(--ease-out);
  will-change: opacity;
}

.skeleton-fade-out.fading {
  opacity: 0;
}

.skeleton-row-stagger {
  opacity: 0;
  transform: translateX(-20px);
  transition: 
    opacity 300ms var(--ease-out),
    transform 300ms var(--ease-out);
  will-change: opacity, transform;
}

.skeleton-row-stagger.revealed {
  opacity: 1;
  transform: translateX(0);
}

/* ================================
   MODAL TRANSITION CLASSES
   ================================ */

.modal-backdrop-enter {
  opacity: 0;
  backdrop-filter: blur(0px);
  transition: 
    opacity var(--transition-normal) var(--ease-out),
    backdrop-filter var(--transition-normal) var(--ease-out);
  will-change: opacity, backdrop-filter;
}

.modal-backdrop-enter.active {
  opacity: 1;
  backdrop-filter: blur(4px);
}

.modal-content-enter {
  opacity: 0;
  transform: scale(0.95) translateY(20px);
  transition: 
    opacity var(--transition-normal) var(--ease-out),
    transform var(--transition-normal) var(--ease-out);
  will-change: opacity, transform;
}

.modal-content-enter.active {
  opacity: 1;
  transform: scale(1) translateY(0);
}

.modal-content-exit {
  opacity: 1;
  transform: scale(1) translateY(0);
  transition: 
    opacity var(--transition-normal) var(--ease-out),
    transform var(--transition-normal) var(--ease-out);
  will-change: opacity, transform;
}

.modal-content-exit.inactive {
  opacity: 0;
  transform: scale(0.95) translateY(-20px);
}

/* ================================
   CONTENT REVEAL ANIMATIONS
   ================================ */

.content-reveal {
  opacity: 0;
  transform: translateY(20px);
  transition: 
    opacity var(--transition-normal) var(--ease-out),
    transform var(--transition-normal) var(--ease-out);
  will-change: opacity, transform;
}

.content-reveal.visible {
  opacity: 1;
  transform: translateY(0);
}

.content-row-reveal {
  opacity: 0;
  transform: translateX(-30px);
  transition: 
    opacity 400ms var(--ease-out),
    transform 400ms var(--ease-out);
  will-change: opacity, transform;
}

.content-row-reveal.visible {
  opacity: 1;
  transform: translateX(0);
}

.content-header-reveal {
  opacity: 0;
  transform: translateY(-10px);
  transition: 
    opacity var(--transition-normal) var(--ease-out),
    transform var(--transition-normal) var(--ease-out);
  will-change: opacity, transform;
}

.content-header-reveal.visible {
  opacity: 1;
  transform: translateY(0);
}

/* ================================
   STAGGERED ANIMATIONS
   ================================ */

.stagger-container .stagger-item {
  opacity: 0;
  transform: translateY(20px);
  transition: 
    opacity var(--transition-normal) var(--ease-out),
    transform var(--transition-normal) var(--ease-out);
  will-change: opacity, transform;
}

.stagger-container .stagger-item.visible {
  opacity: 1;
  transform: translateY(0);
}

/* Individual stagger delays */
.stagger-delay-1 { transition-delay: var(--delay-1); }
.stagger-delay-2 { transition-delay: var(--delay-2); }
.stagger-delay-3 { transition-delay: var(--delay-3); }
.stagger-delay-4 { transition-delay: var(--delay-4); }
.stagger-delay-5 { transition-delay: var(--delay-5); }
.stagger-delay-6 { transition-delay: var(--delay-6); }
.stagger-delay-7 { transition-delay: var(--delay-7); }
.stagger-delay-8 { transition-delay: var(--delay-8); }

/* ================================
   TABLE ROW ANIMATIONS
   ================================ */

.table-row-enter {
  opacity: 0;
  transform: translateX(-20px);
  transition: 
    opacity 350ms var(--ease-out),
    transform 350ms var(--ease-out);
  will-change: opacity, transform;
}

.table-row-enter.active {
  opacity: 1;
  transform: translateX(0);
}

.table-row-exit {
  opacity: 1;
  transform: translateX(0);
  transition: 
    opacity 250ms var(--ease-in),
    transform 250ms var(--ease-in);
  will-change: opacity, transform;
}

.table-row-exit.inactive {
  opacity: 0;
  transform: translateX(20px);
}

/* ================================
   INTERACTIVE ELEMENT ANIMATIONS
   ================================ */

.interactive-button {
  opacity: 0;
  transform: translateY(10px);
  transition: 
    opacity 200ms var(--ease-out),
    transform 200ms var(--ease-out);
  will-change: opacity, transform;
}

.interactive-button.visible {
  opacity: 1;
  transform: translateY(0);
}

/* ================================
   LOADING STATE TRANSITIONS
   ================================ */

.loading-shimmer {
  position: relative;
  overflow: hidden;
}

.loading-shimmer::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.2),
    transparent
  );
  animation: shimmer 1.5s infinite;
  will-change: left;
}

@keyframes shimmer {
  0% {
    left: -100%;
  }
  100% {
    left: 100%;
  }
}

/* ================================
   TRANSITION COORDINATION CLASSES
   ================================ */

/* Coordinated fade sequence */
.coordinated-fade-layer-1 {
  transition: opacity var(--transition-slow) var(--ease-out);
  will-change: opacity;
}

.coordinated-fade-layer-2 {
  transition: opacity var(--transition-normal) var(--ease-out);
  transition-delay: 200ms; /* Starts 200ms after layer 1 */
  will-change: opacity;
}

.coordinated-fade-content {
  transition: opacity var(--transition-normal) var(--ease-out);
  transition-delay: 450ms; /* Starts 450ms after layer 1, 250ms after layer 2 */
  will-change: opacity;
}

/* ================================
   PERFORMANCE OPTIMIZATION CLASSES
   ================================ */

.optimize-rendering {
  contain: layout style paint;
  transform: var(--transform-gpu);
}

.optimize-animations {
  contain: layout style paint;
  will-change: auto;
}

.optimize-animations.active {
  will-change: opacity, transform;
}

/* ================================
   ACCESSIBILITY ENHANCEMENTS
   ================================ */

.visually-hidden {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

/* Focus management during transitions */
.transition-focus-lock {
  transition: none;
}

.transition-focus-lock:focus-within {
  outline: 2px solid hsl(var(--ring));
  outline-offset: 2px;
}

/* ================================
   ANIMATION STATE CLASSES
   ================================ */

/* Animation states for JavaScript control */
.animate-ready {
  pointer-events: auto;
}

.animate-loading {
  pointer-events: none;
}

.animate-error {
  animation: error-shake 0.5s ease-in-out;
}

@keyframes error-shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  75% { transform: translateX(5px); }
}

/* ================================
   LAYOUT STABILITY CLASSES
   ================================ */

/* Prevent layout shift during transitions */
.layout-stable {
  min-height: var(--layout-height, auto);
  contain: layout;
}

/* Reserve space for smooth transitions */
.space-reservation {
  min-height: 400px; /* Adjust based on content */
  position: relative;
}

/* ================================
   PRINT STYLES
   ================================ */

@media print {
  .smooth-fade-in,
  .smooth-fade-out,
  .smooth-scale-in,
  .smooth-scale-out,
  .skeleton-fade-out,
  .content-reveal,
  .table-row-enter,
  .interactive-button {
    opacity: 1 !important;
    transform: none !important;
    transition: none !important;
  }
  
  .loading-shimmer::before {
    display: none;
  }
}